<html>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="./js-priority-queue/priority-queue.js"></script>
</head>
<body>
	<div id="message"></div>
	<div id="grid" style='width:520px;height:500px;'>
		
	</div>
	<!-- <div style="width: 500px;">
 <div style="float: left; width: 100px;height: 100px;border: 1px solid;">Left Stuff</div>
 <div style="float: left; width: 100px;height: 100px;border: 1px solid;">Middle Stuff</div>
 <div style="float: left; width: 100px;height: 100px;border: 1px solid;">Right Stuff</div>
 <br style="clear: left;" />
</div>
 -->
</body>
<style type="text/css">
div.inline { float:left; }
.clearBoth { clear:both; }
</style>

<script type="text/javascript">
	var width=10;
	var height=5;
	$(document).ready(function(){
		for (var i = 0; i < height ; i++) {
			for (var j = 0; j < width; j++) {
				// $("#grid").append("<div id='"+i+","+j+"' style='float:left;'> </div>");
				$("#grid").append('<div id="'+i+'-'+j+'" style="float: left; width: 50px;height: 50px;border: 1px solid;" data-vacant="blocked"></div>');
			};
			$("#grid").append("<br>");
		};

		counter = 1;
		for (var i = 0; i < height ; i++) {
			for (var j = 0; j < width; j++) {	
				// setTimeout(function(i,j){green(i,j);}, 1000);
				counter+=1;
				(function (x,y,z) {
				        setTimeout(function () { green(x,y); }, 100*z);
				    })(i,j,counter);
			}
		}
		function green(i,j){
			console.log(i);
			$("#"+i+"-"+j).hide().fadeIn( 10000 ).css("background-color","gray");
		}
	});

	function get_key(i,j){return  i+"-"+j;	}
	function get_heuristic(x,y){return Math.abs(x[0]-y[0])+Math.abs(x[1]-y[1])}
	function get_point(x){s = x.split("-"); return [s[0],s[1]];}

	var height = 7;
	var width = 7;
	var e_max = 10;
	var e;
	var start = [1,1];
	var goal = [4,5];
	var s_start = get_key(start[0],start[1]) ;
	var s_goal 	= get_key(goal[0],goal[1]) ;
	var v = {};
	var g = {};
	var h = {};
	var f = {};
	var parent = {};
	var open = new PriorityQueue({ comparator: function(a, b) { return a[1] - b[1]; }}); //tie-breaking
	var open_list = []
	var closed_list = []
	var incons_list = []
	var deleted_list = []
	
	function ImprovePath(){
		while(g[s_goal] + e*get_heuristic())
	}
	function ComputePath(){
		while(true){
			if(ImprovePath()==false){
				return false;
			}
		}
	}
	function run_iara(){
		//for s E S
		for (var i = 0; i < height ; i++) {
			for (var j = 0; j < width; j++) {	
				var key = get_key(i,j);
				v[key] = Infinity;
				g[key] = Infinity;
				parent[key] = null;
				f[key] = Infinity;
				h[key] = get_heuristic([i,j],get_point(s_goal));
			}
		}
		f[s_start] 	= 0		;
		g(s_start) 	= 0		;
		e 		= e_max ;
		// s_start = get_key(start[0],start[1]) ;
		// s_goal 	= get_key(goal[0],goal[1]) ;
		open 		= new PriorityQueue({ comparator: function(a, b) { return a[1] - b[1]; }});
		open_list 	= []	;
		closed_list = []	;
		incons_list = []	;
		deleted_list= []	;

		open.queue([s_start,f[s_start]]);
		open_list.push(s_start);
		while(s_start!=s_goal){
			if(ComputePath()==false){
				$("#message").html("No Solution Found").hide().show(2000);
				return false;
			}
		}
	}

</script>
</html>